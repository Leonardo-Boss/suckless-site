diff -up dmenu/dmenu.1 dmenu-itext/dmenu.1
--- dmenu/dmenu.1	2018-08-22 15:47:38.835125400 -0400
+++ dmenu-itext/dmenu.1	2018-08-22 16:09:04.358460200 -0400
@@ -3,7 +3,7 @@
 dmenu \- dynamic menu
 .SH SYNOPSIS
 .B dmenu
-.RB [ \-bfiv ]
+.RB [ \-bfitv ]
 .RB [ \-l
 .IR lines ]
 .RB [ \-m
@@ -75,6 +75,9 @@ defines the selected background color.
 .BI \-sf " color"
 defines the selected foreground color.
 .TP
+.B \-t
+Return key prints input text instead of selection.
+.TP
 .B \-v
 prints version information to stdout, then exits.
 .TP
@@ -89,13 +92,14 @@ Copy the selected item to the input fiel
 .TP
 .B Return
 Confirm selection.  Prints the selected item to stdout and exits, returning
-success.
+success. If \-t option is given it confirms input instead of selection.
 .TP
 .B Ctrl-Return
 Confirm selection.  Prints the selected item to stdout and continues.
 .TP
 .B Shift\-Return
 Confirm input.  Prints the input text to stdout and exits, returning success.
+If \-t option is given it confirms selection instead of input.
 .TP
 .B Escape
 Exit without selecting an item, returning failure.
diff -up dmenu/dmenu.c dmenu-itext/dmenu.c
--- dmenu/dmenu.c	2018-08-22 15:47:38.835580500 -0400
+++ dmenu-itext/dmenu.c	2018-08-22 15:43:43.816868600 -0400
@@ -46,6 +46,7 @@ static struct item *items = NULL;
 static struct item *matches, *matchend;
 static struct item *prev, *curr, *next, *sel;
 static int mon = -1, screen;
+static int use_text_input = 0;
 
 static Atom clip, utf8;
 static Display *dpy;
@@ -466,7 +467,10 @@ insert:
 		break;
 	case XK_Return:
 	case XK_KP_Enter:
-		puts((sel && !(ev->state & ShiftMask)) ? sel->text : text);
+		if (use_text_input)
+			puts((sel && (ev->state & ShiftMask)) ? sel->text : text);
+		else
+			puts((sel && !(ev->state & ShiftMask)) ? sel->text : text);
 		if (!(ev->state & ControlMask)) {
 			cleanup();
 			exit(0);
@@ -707,7 +711,9 @@ main(int argc, char *argv[])
 		else if (!strcmp(argv[i], "-i")) { /* case-insensitive item matching */
 			fstrncmp = strncasecmp;
 			fstrstr = cistrstr;
-		} else if (i + 1 == argc)
+		} else if (!strcmp(argv[i], "-t")) /* favors text input over selection */
+			use_text_input = 1;
+		else if (i + 1 == argc)
 			usage();
 		/* these options take one argument */
 		else if (!strcmp(argv[i], "-l"))   /* number of lines in vertical list */
Common subdirectories: dmenu/.git and dmenu-itext/.git
