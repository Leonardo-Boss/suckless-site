# xfce4-panel

## Description

When xfce4 tools are on the system anyway, it might make sense to use the xfce4-panel in dwm.  
This patch slightly modifies dwm, so that it treats window with name `xfce4-panel` properly as a status bar, i.e.:

- it never has borders
- always has y=0
- it is never shown as active window in the tag indicators
- it is shown on all tags (via a tag rule in the config)

![dwm_xfce4-panel.png](dwm_xfce4-panel.png)

- Looks best when background is set to solid color, same as the dwm statusline (black in the example)
- The panel does act as systray for third party tools, i.e. the systray patch is no more required

The patch has been created against dwm6.2.


## Download

* [dwm-xfce4-panel-20210606-67d76bd.diff](dwm-xfce4-panel-20210606-67d76bd.diff) (2021-06-06)


## Notes

- The workspace switcher won't work (but dwm's tag switcher remains anyway on the left)
- The rest of xfce4's 40 or so panel apps should work (if installed)
- A start via xinitrc should be fine. I start it using the [autostart](https://dwm.suckless.org/patches/autostart/) patch, with  `run ./panel.sh` in
  `autostart.sh`, with `panel.sh`:
        sleep 0.3
        xfce4-panel --disable-wm-check


## Panel Config

- Configure exactly one Panel, e.g. via `xfce4-settings-manager` -> `panel`
- Under Tab Display:

    - Mode Horizontal  
    - Output: Your top monitor (with y=0), panel will stick there   
    - Lock Panel: false   
    - Don't reserve space on borders: true   
    - Row size: 23 pixel, 1 row works for me   
    - Autom. increase the length: true   

The content of the panel you configure "normally", i.e. by adding items in the panel's items tab or via CLI tools.

Having *different* panels in a xfce4 than in a dwm session with the same user I did not try. I guess it should be
possible via the backup and restore tool of the panel UI and [xfconf](https://docs.xfce.org/xfce/xfconf/xfconf-query).

Tip: *Never* try start `xfce4-session` from within dwm, the warning `Failed to connect to session manager` at panel startup is normal. It will try autoexplore your available workspaces - and conclude you have `2**9`, writing that back into the xfce4 config... I had to manually clean up the config via `xfconf`.

----


## Optional Read: Some Infos About `genmon`

Any panel offers the possibility to include generic scripts output.   
In `xfce4-panel` this is done by the panel item: "Generic Monitor" (genmon). It supports output styled with pango markup and mouseover/onclick hooks.

Here are some genmon script acollections:
- [xfce4-genmon-scripts](https://awesomeopensource.com/project/xtonousou/xfce4-genmon-scripts) 
- [xfce4-genmon-scripts-2](https://github.com/almaceleste/xfce4-genmon-scripts)
- [xfce4-genmon-scripts-3](https://github.com/levimake/xfce4-genmon-panel-scripts)

Manual is [here](https://docs.xfce.org/panel-plugins/xfce4-genmon-plugin/start#usage).

Personally I wanted to have CPU monitor which shows the name of current high cpu eater(s) if present (next to current load by core) and on mouseover remembers the top output from the most recent high load situation in the past:

![genmon.png](genmon.png)

To get that, I cat the content of a file generated by this script, started in `autostart.sh` in the background:
[cpu_mon.py](cpu_mon.py).


Author
-------
* Gunther Klessinger <gklessinger[at]gmx.de>


