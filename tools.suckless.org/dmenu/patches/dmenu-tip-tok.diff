diff -r ccb2b92086bf dmenu.1
--- a/dmenu.1	Thu Aug 12 15:35:51 2010 +0100
+++ b/dmenu.1	Sat Aug 14 19:28:49 2010 +0100
@@ -5,6 +5,7 @@
 .B dmenu
 .RB [ \-b ]
 .RB [ \-i ]
+.RB [ \-t ]
 .RB [ \-l
 .IR lines ]
 .RB [ \-p
@@ -48,6 +49,9 @@
 .B \-i
 dmenu matches menu items case insensitively.
 .TP
+.B \-t
+dmenu uses space separated tokens to match menu items.
+.TP
 .BI \-l " lines"
 dmenu lists items vertically, with the given number of lines.
 .TP
diff -r ccb2b92086bf dmenu.c
--- a/dmenu.c	Thu Aug 12 15:35:51 2010 +0100
+++ b/dmenu.c	Sat Aug 14 19:28:49 2010 +0100
@@ -30,7 +30,8 @@
 static void grabkeyboard(void);
 static void insert(const char *s, ssize_t n);
 static void keypress(XKeyEvent *ev);
-static void match(void);
+static void matchstr(void);
+static void matchtok(void);
 static size_t nextrune(int incr);
 static void paste(void);
 static void readstdin(void);
@@ -61,6 +62,7 @@
 static Window root, win;
 
 static int (*fstrncmp)(const char *, const char *, size_t) = strncmp;
+static void (*match)(void) = matchstr;
 
 void
 appenditem(Item *item, Item **list, Item **last) {
@@ -321,7 +323,7 @@
 }
 
 void
-match(void) {
+matchstr(void) {
 	size_t len;
 	Item *item, *itemend, *lexact, *lprefix, *lsubstr, *exactend, *prefixend, *substrend;
 
@@ -360,6 +362,33 @@
 	calcoffsets();
 }
 
+void
+matchtok(void) {
+	char buf[sizeof text];
+	char **tokv, *s;
+	int tokc, i;
+	Item *item, *end;
+
+	tokc = 0;
+	tokv = NULL;
+	strcpy(buf, text);
+	for(s = strtok(buf, " "); s; tokv[tokc-1] = s, s = strtok(NULL, " "))
+		if(!(tokv = realloc(tokv, ++tokc * sizeof *tokv)))
+			eprintf("cannot realloc %u bytes\n", tokc * sizeof *tokv);
+
+	matches = end = NULL;
+	for(item = items; item; item = item->next) {
+		for(i = 0; i < tokc; i++)
+			if(!fstrstr(item->text, tokv[i]))
+				break;
+		if(i == tokc)
+			appenditem(item, &matches, &end);
+	}
+	free(tokv);
+	curr = prev = next = sel = matches;
+	calcoffsets();
+}
+
 size_t
 nextrune(int incr) {
 	size_t n, len;
@@ -487,7 +516,7 @@
 
 void
 usage(void) {
-	fputs("usage: dmenu [-b] [-i] [-l lines] [-p prompt] [-fn font] [-nb color]\n"
+	fputs("usage: dmenu [-b] [-i] [-t] [-l lines] [-p prompt] [-fn font] [-nb color]\n"
 	      "             [-nf color] [-sb color] [-sf color] [-v]\n", stderr);
 	exit(EXIT_FAILURE);
 }
@@ -507,6 +536,8 @@
 			topbar = False;
 		else if(!strcmp(argv[i], "-i"))
 			fstrncmp = strncasecmp;
+		else if(!strcmp(argv[i], "-t"))
+			match = matchtok;
 		else if(i == argc-1)
 			usage();
 		/* double flags */
